<!doctype html>
<html class="no-js" lang="">

<head>
	<meta charset="utf-8">
	<title>HMap - devmode</title>
	<style type="text/css">
		#main-page {
			display: flex;
			flex-direction: row;
		}
		#json-data {
			margin-left : 10px;
			width: 300px;
			height: 300px;
			font-family: "Courier New", Courier, monospace
		}
	</style>
</head>

<body>
	<div id="main-page">
		<div class="swf" style="background-color: black; width: 300px; height: 300px; "></div>
		<div id="data">
			<textarea id="json-data"></textarea>
			<button id="reload">Reload the map</button>
		</div>
			
	</div>
	
	<script type="text/javascript">
		var HMAP_DEVMODE = true;
		var HMAP = null;
		var T = document.querySelector('#json-data');
		if ( T !== null) {
			T.onclick = function() { T.value = ''; };
		}
	</script>
	<script src="../dist/hmap.user.es6.js"></script>
	<script type="text/javascript">
		var reload = document.querySelector('#reload');
		var textbox = document.querySelector('#json-data');
		if ( reload !== null && textbox !== null) {
			reload.onclick = function() { 
				try {
					const data = JSON.parse(textbox.value);
					if ('_users' in data && data._users && data._users.length > 0) {
						HMAP.location = 'doors';
					} else {
						HMAP.location = 'desert';
					}
					HMAP.reloadMapWithData(data);
					
				} catch (err) {
					alert('There is something wrong with the JSON you entered');
					console.error(err);
				}
			};
		}
	</script>
</body>

</html>